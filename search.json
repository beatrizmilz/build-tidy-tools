[
  {
    "objectID": "LICENSE.html#creative-commons-attribution-sharealike-4.0-international-public-license",
    "href": "LICENSE.html#creative-commons-attribution-sharealike-4.0-international-public-license",
    "title": "Building tidy tools",
    "section": "Creative Commons Attribution-ShareAlike 4.0 International Public License",
    "text": "Creative Commons Attribution-ShareAlike 4.0 International Public License\nBy exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-ShareAlike 4.0 International Public License (“Public License”). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.\n\nSection 1 – Definitions.\n\nAdapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image.\nAdapter’s License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License.\nBY-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses, approved by Creative Commons as essentially the equivalent of this Public License.\nCopyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights.\nEffective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements.\nExceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material.\nLicense Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution and ShareAlike.\nLicensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License.\nLicensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license.\nLicensor means the individual(s) or entity(ies) granting rights under this Public License.\nShare means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them.\nSui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world.\nYou means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.\n\n\n\nSection 2 – Scope.\n\nLicense grant.\n\nSubject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to:\nA. reproduce and Share the Licensed Material, in whole or in part; and\nB. produce, reproduce, and Share Adapted Material.\nExceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions.\nTerm. The term of this Public License is specified in Section 6(a).\nMedia and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material.\nDownstream recipients.\nA. Offer from the Licensor – Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License.\nB. __Additional offer from the Licensor – Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter’s License You apply.\nC. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material.\nNo endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i).\n\nOther rights.\n\nMoral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise.\nPatent and trademark rights are not licensed under this Public License.\nTo the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties.\n\n\n\n\nSection 3 – License Conditions.\nYour exercise of the Licensed Rights is expressly made subject to the following conditions.\n\nAttribution.\n\nIf You Share the Licensed Material (including in modified form), You must:\nA. retain the following if it is supplied by the Licensor with the Licensed Material:\n\nidentification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated);\na copyright notice;\na notice that refers to this Public License;\na notice that refers to the disclaimer of warranties;\na URI or hyperlink to the Licensed Material to the extent reasonably practicable;\n\nB. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and\nC. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License.\nYou may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information.\nIf requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable.\n\nShareAlike.\n\nIn addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply.\n\nThe Adapter’s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-SA Compatible License.\nYou must include the text of, or the URI or hyperlink to, the Adapter’s License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material.\nYou may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter’s License You apply.\n\n\n\nSection 4 – Sui Generis Database Rights.\nWhere the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material:\n\nfor the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database;\nif You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and\nYou must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database.\n\nFor the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.\n\n\nSection 5 – Disclaimer of Warranties and Limitation of Liability.\n\nUnless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You.\nTo the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You.\nThe disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.\n\n\n\nSection 6 – Term and Termination.\n\nThis Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically.\nWhere Your right to use the Licensed Material has terminated under Section 6(a), it reinstates:\n\nautomatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or\nupon express reinstatement by the Licensor.\n\nFor the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License.\nFor the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License.\nSections 1, 5, 6, 7, and 8 survive termination of this Public License.\n\n\n\nSection 7 – Other Terms and Conditions.\n\nThe Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed.\nAny arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.t stated herein are separate from and independent of the terms and conditions of this Public License.\n\n\n\nSection 8 – Interpretation.\n\nFor the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License.\nTo the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions.\nNo term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor.\nNothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority.\n\n\nCreative Commons is not a party to its public licenses. Notwithstanding, Creative Commons may elect to apply one of its public licenses to material it publishes and in those instances will be considered the “Licensor.” Except for the limited purpose of indicating that material is shared under a Creative Commons public license or as otherwise permitted by the Creative Commons policies published at creativecommons.org/policies, Creative Commons does not authorize the use of the trademark “Creative Commons” or any other trademark or logo of Creative Commons without its prior written consent including, without limitation, in connection with any unauthorized modifications to any of its public licenses or any other arrangements, understandings, or agreements concerning use of licensed material. For the avoidance of doubt, this paragraph does not form part of the public licenses.\nCreative Commons may be contacted at creativecommons.org"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "1 + 1\n\n[1] 2"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#the-team",
    "href": "materials/day-2-session-1-design.html#the-team",
    "title": "📦 Building tidy tools",
    "section": "The Team",
    "text": "The Team\n\n\nEmma Rand 🐦er13_r\nElliot Murphy\nBeatriz Milz\n\nIan Lyttle 🐦ijlyttle\nHaley Jeppson\nTed Laderas\n\n\nStanding on the shoulders of Building Tidy Tools, rstudio::conf(2020) (C. Wickham and Wickham 2021), R Packages (H. Wickham and Bryan 2020)"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#code-of-conduct",
    "href": "materials/day-2-session-1-design.html#code-of-conduct",
    "title": "📦 Building tidy tools",
    "section": "Code of conduct",
    "text": "Code of conduct"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#housekeeping",
    "href": "materials/day-2-session-1-design.html#housekeeping",
    "title": "📦 Building tidy tools",
    "section": "Housekeeping",
    "text": "Housekeeping\n\nToilets\nFire exits and alarms\nanything else?"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#how-we-will-work",
    "href": "materials/day-2-session-1-design.html#how-we-will-work",
    "title": "📦 Building tidy tools",
    "section": "How we will work",
    "text": "How we will work\n\nstickies\nno stupid questions"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#schedule",
    "href": "materials/day-2-session-1-design.html#schedule",
    "title": "📦 Building tidy tools",
    "section": "Schedule",
    "text": "Schedule\n\nFunction design\nWorking with side effects\nTidy Eval\nMiscellany"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#state-of-play",
    "href": "materials/day-2-session-1-design.html#state-of-play",
    "title": "📦 Building tidy tools",
    "section": "State of play",
    "text": "State of play\nWe want to concentrate on specific concepts, rather than writing entire functions.\nWe have created a set of checkpoints called states:\n\nbtt22::btt_state()\n\n [1] \"2.1.1\" \"2.1.2\" \"2.2.1\" \"2.2.2\" \"2.2.3\" \"2.3.1\" \"2.3.2\" \"2.3.3\" \"2.3.4\"\n[10] \"2.3.5\" \"2.3.6\" \"2.3.7\" \"2.4.1\" \"2.4.2\" \"2.4.3\"\n\n\nFor example, \"2.1.1\" means day 2, session 1, task 1."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#getting-new-files",
    "href": "materials/day-2-session-1-design.html#getting-new-files",
    "title": "📦 Building tidy tools",
    "section": "Getting new files",
    "text": "Getting new files\nTo get new files for a state:\n# \"2.1.1\": day 2, session 1, task 1\nbtt_get(\"2.1.1\")\n\n\nfiles to directories R, tests/testthat.\ncontains functions, tests that you will complete."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#staying-on-the-happy-path",
    "href": "materials/day-2-session-1-design.html#staying-on-the-happy-path",
    "title": "📦 Building tidy tools",
    "section": "Staying on the “happy path”",
    "text": "Staying on the “happy path”\nOne example builds on another, so it’s important to keep up.\n\nWe will do our best to help; in case you need to reset:\nbtt_reset_hard(\"2.1.1\")\n\n\nOverwrites:\n\ndirectories: R, tests/testthat\nImports, Suggests sections of DESCRIPTION"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#learning-objectives",
    "href": "materials/day-2-session-1-design.html#learning-objectives",
    "title": "📦 Building tidy tools",
    "section": "Learning objectives",
    "text": "Learning objectives\nAt the end of this section you will be able to:\n\norder and name your function’s arguments.\nrecognize type-stable functions and their importance.\ndistinguish a pure function from a function that has or uses side effects.\n\nBut first…"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#make-r-cmd-check-happy",
    "href": "materials/day-2-session-1-design.html#make-r-cmd-check-happy",
    "title": "📦 Building tidy tools",
    "section": "Make R CMD CHECK happy",
    "text": "Make R CMD CHECK happy\nWhen we finished yesterday:\n> checking R code for possible problems ... NOTE\n  uss_make_matches: no visible binding for global variable ‘tier’\n  uss_make_matches: no visible binding for global variable ‘Season’\n  uss_make_matches: no visible binding for global variable ‘Date’\n  uss_make_matches: no visible binding for global variable ‘home’\n  uss_make_matches: no visible binding for global variable ‘visitor’\n  uss_make_matches: no visible binding for global variable ‘hgoal’\n  uss_make_matches: no visible binding for global variable ‘vgoal’\n  Undefined global functions or variables:\n    Date Season hgoal home tier vgoal visitor\n\n0 errors ✓ | 0 warnings ✓ | 1 note x\n\nWhere does tier, etc. come from?\n\n\n\nWe know it’s a column in a data frame, but R doesn’t know that.\nHow to specify “this comes from a data frame” ?"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#preview-of-tidy-eval",
    "href": "materials/day-2-session-1-design.html#preview-of-tidy-eval",
    "title": "📦 Building tidy tools",
    "section": "Preview of tidy eval",
    "text": "Preview of tidy eval\nThe {rlang} package provides pronouns.\n\nInteractively, we might write:\nmtcars |>\n  mutate(cons_lper100km = 235.215 / mpg)\n\n\nIn a package function, we would write:\nmtcars |>\n  dplyr::mutate(cons_lper100km = 235.215 / .data$mpg)"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#your-turn-2.1.1",
    "href": "materials/day-2-session-1-design.html#your-turn-2.1.1",
    "title": "📦 Building tidy tools",
    "section": "Your turn \"2.1.1\"",
    "text": "Your turn \"2.1.1\"\n\nAdd the {rlang} package:\n\nusethis::use_package(\"rlang\")\n\nImport the .data pronoun:\n\n# adds to R/ussie-package.R\nusethis::use_import_from(\"rlang\", \".data\")\n\nR/matches.R: use .data in uss_make_matches().\ndevtools::check(), should be happy now."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#api-design",
    "href": "materials/day-2-session-1-design.html#api-design",
    "title": "📦 Building tidy tools",
    "section": "API design",
    "text": "API design\n\nA thing I like about tidyverse:\n\n\n\nthere should be a function to do this; it should look like this\n\n\n\n\nthere already is\n\n\n\nBecause:\n\nfunctions and arguments follow naming conventions\narguments are ordered according to purpose\nwe know what to expect for return values"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#evolving-references",
    "href": "materials/day-2-session-1-design.html#evolving-references",
    "title": "📦 Building tidy tools",
    "section": "Evolving references",
    "text": "Evolving references\nThe way we approach problems is always evolving; tidyverse is no exception:\n\n\nTidyverse Style Guide\n\n\n\n\nTidyverse Design Guide\n\n\n\n\nfollow the GitHub repo of your favorite tidyverse/r-lib package (mine is {usethis}):\n\nissue discussions\npull-request reviews"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#naming-functions",
    "href": "materials/day-2-session-1-design.html#naming-functions",
    "title": "📦 Building tidy tools",
    "section": "Naming functions",
    "text": "Naming functions\nIf writing a smaller package, consider prefixing your functions:\n\n{ussie}: uss_make_matches()\n{btt22}: btt_get()\n\n\nUse a verb next:\n\ndplyr::mutate(), stringr::str_split()\n\n\n\nUse a noun if building up a specific type of object:\n\nggplot2::ggplot(), ggplot2::geom_point()"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#casing",
    "href": "materials/day-2-session-1-design.html#casing",
    "title": "📦 Building tidy tools",
    "section": "Casing",
    "text": "Casing\n\nTidyverse uses snake_case\nPython prefers snake_case\nJavaScript prefers:\n\ncamelCase for functions\nPascalCase for classes, interfaces\n\n\n\nPick a convention according to your domain, follow it."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#arguments",
    "href": "materials/day-2-session-1-design.html#arguments",
    "title": "📦 Building tidy tools",
    "section": "Arguments",
    "text": "Arguments\nHere, mtcars is an argument:\nhead(mtcars)\n\nHere, data is a formal argument:\nhead <- function(data){\n  ...\n}\n\n\nIn R, we sometimes use these terms interchangeably; we sometimes use the term formals.\n\n\n¯\\_(ツ)_/¯"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#naming-arguments",
    "href": "materials/day-2-session-1-design.html#naming-arguments",
    "title": "📦 Building tidy tools",
    "section": "Naming arguments",
    "text": "Naming arguments\nLike naming functions, strive to be:\n\nconsistent\nevocative\nconcise\n\n\n\nThere are only two hard things in Computer Science: cache invalidation and naming things.\n– Phil Karlton\n\n\n\n\nAnd off-by-one errors – Leon Bambrick"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#ordering-arguments",
    "href": "materials/day-2-session-1-design.html#ordering-arguments",
    "title": "📦 Building tidy tools",
    "section": "Ordering arguments",
    "text": "Ordering arguments\n\ndata: first argument, “the thing”\ndescriptors: values the user should specify\ndots (...): stuff that gets passed to other functions\ndetails: values with defaults\n\n\nI have seen the order of dots and details reversed.\nHowever, data and descriptors almost always come first."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#discuss-with-neighbour",
    "href": "materials/day-2-session-1-design.html#discuss-with-neighbour",
    "title": "📦 Building tidy tools",
    "section": "Discuss with neighbour",
    "text": "Discuss with neighbour\nWhich are: data, descriptors, details?\n# there are acutally more args...\npivot_longer <- function(\n  data,                \n  cols,                \n  names_to = \"name\",   \n  names_prefix = NULL  \n) {\n  ...\n}"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#discuss-with-neighbor-answer",
    "href": "materials/day-2-session-1-design.html#discuss-with-neighbor-answer",
    "title": "📦 Building tidy tools",
    "section": "Discuss with neighbor (answer)",
    "text": "Discuss with neighbor (answer)\nWhich are: data, descriptors, details?\n# there are acutally more args...\npivot_longer <- function(\n  data,                # data\n  cols,                # descriptor\n  names_to = \"name\",   # details\n  names_prefix = NULL  #\n) {\n  ...\n}"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#return-value-type-stability",
    "href": "materials/day-2-session-1-design.html#return-value-type-stability",
    "title": "📦 Building tidy tools",
    "section": "Return value: type stability",
    "text": "Return value: type stability\nThis is a key to tidyverse.\n\nIn theory\nType of return-value depends only on the types of the inputs.\n\nno return_tibble = TRUE arguments.\n\nIn practice\n\nreturn same type as data (first) argument\nreturn constant type, e.g. double"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#putting-it-all-together",
    "href": "materials/day-2-session-1-design.html#putting-it-all-together",
    "title": "📦 Building tidy tools",
    "section": "Putting it all together",
    "text": "Putting it all together\nWhen I think of tidyverse functions, I can remember type for:\n\ndata (first) argument\nreturn value\n\n\nFor example:\n\ndplyr::mutate(): tibble -> tibble\ntidyr::pivot_longer(): tibble -> tibble\n\n\n\ntibble -> tibble pattern makes it easy to work with the pipe: |>"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#our-turn-2.1.2",
    "href": "materials/day-2-session-1-design.html#our-turn-2.1.2",
    "title": "📦 Building tidy tools",
    "section": "Our turn \"2.1.2\"",
    "text": "Our turn \"2.1.2\"\nImplement a function, uss_get_matches():\n\ngiven a country\nreturn a matches tibble\n\n\n\nOnly if needed, btt22::btt_reset_hard(\"2.1.2\")\n\n\n\nGet new files, btt22::btt_get(\"2.1.2\"):\n\ncolumns.R, get-matches.R\ntest-get-matches.R"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#columns.r",
    "href": "materials/day-2-session-1-design.html#columns.r",
    "title": "📦 Building tidy tools",
    "section": "columns.R",
    "text": "columns.R\nIn {ussie} we (will) have all sorts of tibbles:\n\nengsoc\nmatches\nteams_matches\nseasons\n\n\nand groupings:\n\nseasons_grouping\naccumulate"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#build-time-vs.-run-time",
    "href": "materials/day-2-session-1-design.html#build-time-vs.-run-time",
    "title": "📦 Building tidy tools",
    "section": "Build-time vs. run-time",
    "text": "Build-time vs. run-time\n\nPut this code, temporarily, into columns.R:\n\nbuild_time <- Sys.time()\n\nrun_time <- function() {\n  Sys.time()\n}\n\n\ndevtools::load_all()\ntry build_time, run_time()\n\n\n\nIf you need to delay evaluation, try a function."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#get_soccer_data",
    "href": "materials/day-2-session-1-design.html#get_soccer_data",
    "title": "📦 Building tidy tools",
    "section": "get_soccer_data()",
    "text": "get_soccer_data()\nGiven name of dataset in {engsoccerdata}, return dataset:\nget_soccer_data <- function(data_name) {\n  # create isolated environment\n  e <- new.env()\n  \n  # put the data into environment\n  name <- utils::data(\n    list = data_name, \n    package = \"engsoccerdata\", \n    envir = e\n  )[1]\n  \n  # return data from environment\n  e[[name]]\n}"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#uss_countries",
    "href": "materials/day-2-session-1-design.html#uss_countries",
    "title": "📦 Building tidy tools",
    "section": "uss_countries()",
    "text": "uss_countries()\nReturn set of valid values for country:\nuss_countries <- function() {\n  c(\"england\", \"germany\", \"holland\", \"italy\", \"spain\")\n}\n\nRun-time vs. build-time\nSafer habit: delay evaluation by wrapping code in a function"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#best_wins_leeds",
    "href": "materials/day-2-session-1-design.html#best_wins_leeds",
    "title": "📦 Building tidy tools",
    "section": "best_wins_leeds()",
    "text": "best_wins_leeds()\n\nusethis::use_package(\"engsoccerdata\")\nbest_wins_leeds <- function(n = 10) {\n  engsoccerdata::bestwins(\n    engsoccerdata::england,\n    teamname = \"Leeds United\",\n    N = n\n  )\n}\n\n\n\ndevtools::check(), comment best_wins_leeds()\ndevtools::check() 🤔\nrestore commented-out code"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#uss_get_matches",
    "href": "materials/day-2-session-1-design.html#uss_get_matches",
    "title": "📦 Building tidy tools",
    "section": "uss_get_matches()",
    "text": "uss_get_matches()\nGiven country, return matches data:\nuss_get_matches <- function(country = uss_countries()) {\n  \n  # validate country\n  country <- match.arg(country)\n  \n  # get data for country\n  data <- get_soccer_data(country)\n  \n  # capitalize\n  substr(country, 1, 1) <- toupper(substr(country, 1, 1))\n  \n  # make matches data, return\n  uss_make_matches(data, country) \n}"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#document",
    "href": "materials/day-2-session-1-design.html#document",
    "title": "📦 Building tidy tools",
    "section": "Document",
    "text": "Document\nShow an example (or two) of using uss_get_matches() in your package vignette."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#pure-functions-vs.-side-effects",
    "href": "materials/day-2-session-1-design.html#pure-functions-vs.-side-effects",
    "title": "📦 Building tidy tools",
    "section": "Pure functions vs. side effects",
    "text": "Pure functions vs. side effects\n\nI (Ian) have been programming since 1982, in some form.\n\n\n\nI studied mechanical engineering, not computer science; programming on the side.\n\n\n\n\nWhen I learned about this in 2016, it changed my view of programming.\n\n\n\n\nKeeping this distinction in mind simplifies a lot of challenges."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#pure-function",
    "href": "materials/day-2-session-1-design.html#pure-function",
    "title": "📦 Building tidy tools",
    "section": "Pure function",
    "text": "Pure function\nA function where:\n\nthe return value depends only on argument values\nonly change is the return value\n\n\nExamples:\n\n\nfunction(x, y) {\n  x + y\n}\n\n\ncos(pi)"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#side-effects",
    "href": "materials/day-2-session-1-design.html#side-effects",
    "title": "📦 Building tidy tools",
    "section": "Side effects",
    "text": "Side effects\nA function where:\n\nthe return value can depend on “the outside universe”\nthere is a change in the “the outside universe”\n\n\nExamples:\n\n\nreadr::read_csv(\"myfile.csv\")\n\n\nrunif(1)"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#why-is-this-important",
    "href": "materials/day-2-session-1-design.html#why-is-this-important",
    "title": "📦 Building tidy tools",
    "section": "Why is this important?",
    "text": "Why is this important?\n\n\nPure functions easier to test than functions with side effects.\n\n\n\n\nSide effects (interactions with universe) take time (Shiny).\n\n\n\n\nFunctions with side effects should document the effects.\n\n\n\n\nSide effects are not inherently bad (we do need to write to the file system), but they need extra care."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#discuss-with-your-neighbour",
    "href": "materials/day-2-session-1-design.html#discuss-with-your-neighbour",
    "title": "📦 Building tidy tools",
    "section": "Discuss with your neighbour",
    "text": "Discuss with your neighbour\nAre these {ussie} functions pure?\n\nuss_countries()\nuss_make_matches()\nget_soccer_data()\nuss_get_matches()"
  },
  {
    "objectID": "materials/day-2-session-1-design.html#practical-advice",
    "href": "materials/day-2-session-1-design.html#practical-advice",
    "title": "📦 Building tidy tools",
    "section": "Practical advice",
    "text": "Practical advice\nTry to separate tasks into pure functions and side effects:\n\neasier to test the pure functions and side effects separately\nuse these functions in higher-level functions\n\n\nFor example:\n\nuss_make_matches() is a pure function.\nget_soccer_data() uses side effects.\nuss_get_matches() calls each of these functions."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#summary",
    "href": "materials/day-2-session-1-design.html#summary",
    "title": "📦 Building tidy tools",
    "section": "Summary",
    "text": "Summary\n\n\nNaming: be consistent, concise, yet evocative.\n\n\n\n\nArgument order: data, descriptors, dots, details.\n\n\n\n\nReturn value type: be consistent, predictable.\n\n\n\n\nEasy to remember data (first) argument and return value:\n\neasy to use pipe, |>.\n\n\n\n\n\nBe mindful of side effects."
  },
  {
    "objectID": "materials/day-2-session-1-design.html#references",
    "href": "materials/day-2-session-1-design.html#references",
    "title": "📦 Building tidy tools",
    "section": "References",
    "text": "References\n\n\nhttps://bit.ly/..\n\n\n\nWickham, Charlotte, and Hadley Wickham. 2021. Building Tidy Tools. rstudio::conf 2020. https://github.com/rstudio-conf-2020/build-tidy-tools.\n\n\nWickham, Hadley, and Jenny Bryan. 2020. R Packages. The work-in-progress 2nd edition. Online. https://r-pkgs.org/index.html."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#introductions",
    "href": "materials/day-1-session-1-introduction.html#introductions",
    "title": "📦 Building tidy tools",
    "section": "Introductions",
    "text": "Introductions\nThis is a two-day, hands-on workshop for those who have embraced the tidyverse and want to build their own packages.\n\nHave you written a few of your own R functions?\nAre you ready to start sharing your code (or data) through R packages?\nAre you curious what you can do to make your first R packages easy for your users to use, and for you to maintain?"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#the-team",
    "href": "materials/day-1-session-1-introduction.html#the-team",
    "title": "📦 Building tidy tools",
    "section": "The team",
    "text": "The team\n\n\nEmma Rand 🐦er13_r\nElliot Murphy\nBeatriz Milz\n\nIan Lyttle\nHaley Jeppson\nTed Laderas\n\n\nStanding on the shoulders of Building Tidy Tools, rstudio::conf(2020) (C. Wickham and Wickham 2021), R Packages (H. Wickham and Bryan 2020)"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#housekeeping",
    "href": "materials/day-1-session-1-introduction.html#housekeeping",
    "title": "📦 Building tidy tools",
    "section": "Housekeeping",
    "text": "Housekeeping\n\nToilets\nFire exits and alarms\nanything else?"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#prerequisites",
    "href": "materials/day-1-session-1-introduction.html#prerequisites",
    "title": "📦 Building tidy tools",
    "section": "Prerequisites",
    "text": "Prerequisites\nTo get the most out of this workshop you will need a laptop with the following installed:\n\nR and RStudio\nR package development toolchain: Rtools(windows) or XCode (mac) or r-base-dev\nThe following packages: devtools and TO ADD WHEN FINALISED\nGit\nGitHub account\nGitHub to be linked to RStudio\n\nDetailed instructions for installing these are covered in Prerequisites"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#schedule",
    "href": "materials/day-1-session-1-introduction.html#schedule",
    "title": "📦 Building tidy tools",
    "section": "Schedule",
    "text": "Schedule\nto add from readme when complete"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#code-of-conduct",
    "href": "materials/day-1-session-1-introduction.html#code-of-conduct",
    "title": "📦 Building tidy tools",
    "section": "Code of Conduct",
    "text": "Code of Conduct"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#how-we-will-work",
    "href": "materials/day-1-session-1-introduction.html#how-we-will-work",
    "title": "📦 Building tidy tools",
    "section": "How we will work",
    "text": "How we will work\n\nstickies\nno stupid questions"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#learning-objectives",
    "href": "materials/day-1-session-1-introduction.html#learning-objectives",
    "title": "📦 Building tidy tools",
    "section": "Learning Objectives",
    "text": "Learning Objectives\nAt the end of this section you will be able to:\n\nexplain the rationale for writing packages\nfind and explore their own package library/libraries\ndescribe the key components of a minimal package\ndescribe the different states a package can be in\noutline the development of a package using devtools\ncreate a simple version controlled package with a remote repo on GitHub\nuse the package interactively with devtools::load_all()\ncheck package validity with devtools::check()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#global-options",
    "href": "materials/day-1-session-1-introduction.html#global-options",
    "title": "📦 Building tidy tools",
    "section": "🔥 Global Options",
    "text": "🔥 Global Options\n🎬 Tools | Global Options | General\n\n\n🔲 Restore .RData into workspace at startup: unchecked\nSave workspace to .RData on exit: Never\n\n🎬 Tools | Global Options | Code | Display\n☑️ Show margin: checked\nMargin column 80"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#set-up-your-.rprofile",
    "href": "materials/day-1-session-1-introduction.html#set-up-your-.rprofile",
    "title": "📦 Building tidy tools",
    "section": "🔥 Set up your .Rprofile",
    "text": "🔥 Set up your .Rprofile\nAdd default information about you for that will be used in package development.\n\n\nYou can edit your .Rprofile with usethis::edit_r_profile:\n\n\nusethis::edit_r_profile()\n\n\n\nto set the following options…."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#set-up-your-.rprofile-1",
    "href": "materials/day-1-session-1-introduction.html#set-up-your-.rprofile-1",
    "title": "📦 Building tidy tools",
    "section": "🔥 Set up your .Rprofile",
    "text": "🔥 Set up your .Rprofile\n\noptions(\n  usethis.full_name = \"Emma Rand\",\n  usethis.description = list(\n    `Authors@R` = 'person(\"Emma\", \"Rand\",\n    email = \"emma.rand@york.ac.uk\",\n    role = c(\"aut\", \"cre\"),\n    comment = c(ORCID = \"0000-0001-6452-2420\"))',\n  )\n)"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#set-up-your-.rprofile-2",
    "href": "materials/day-1-session-1-introduction.html#set-up-your-.rprofile-2",
    "title": "📦 Building tidy tools",
    "section": "🔥 Set up your .Rprofile",
    "text": "🔥 Set up your .Rprofile\nLoad devtools on start up\n\n\n\nif (interactive()) {\n  suppressMessages(require(devtools))\n  suppressMessages(require(testthat))\n}\n\nRestart R."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#why-make-a-package-1",
    "href": "materials/day-1-session-1-introduction.html#why-make-a-package-1",
    "title": "📦 Building tidy tools",
    "section": "Why make a package",
    "text": "Why make a package"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#script-vs-package",
    "href": "materials/day-1-session-1-introduction.html#script-vs-package",
    "title": "📦 Building tidy tools",
    "section": "Script vs package",
    "text": "Script vs package\n\n\nScript\n\none-off data analysis\ndefined by .R extension\nlibrary() calls\ndocumentation in # comments\nsource()\n\n\nPackage\n\ndefines reusable components\ndefined by presence of DESCRIPTION file\nRequired packages specified in DESCRIPTION, made available in NAMESPACE file\ndocumentation in files and Roxygen comments\nInstall and restart"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#be-nice-to-future-you",
    "href": "materials/day-1-session-1-introduction.html#be-nice-to-future-you",
    "title": "📦 Building tidy tools",
    "section": "Be nice to future you",
    "text": "Be nice to future you\n\nFuture self: CC-BY-NC, by Julen Colomb, derived from Randall Munroe cartoon"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#to-avoid",
    "href": "materials/day-1-session-1-introduction.html#to-avoid",
    "title": "📦 Building tidy tools",
    "section": "To avoid",
    "text": "To avoid\n\n\n\nvia GIPHY"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#where-do-r-packages-come-from",
    "href": "materials/day-1-session-1-introduction.html#where-do-r-packages-come-from",
    "title": "📦 Building tidy tools",
    "section": "Where do R packages come from?",
    "text": "Where do R packages come from?\nCRAN:\n\ninstall.packages(\"praise\")\n\nGitHub:\n\nremotes::install_github(\"rladies/praise\")\n\nBioconductor\n\nBiocManager::install(\"celaref\")"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#where-do-packages-live",
    "href": "materials/day-1-session-1-introduction.html#where-do-packages-live",
    "title": "📦 Building tidy tools",
    "section": "Where do packages live?",
    "text": "Where do packages live?\nIn a library! In\n\nR.home()\n\n[1] \"/opt/R/4.2.0/lib/R\"\n\n\nThe R home directory is the top-level directory of your R installation.\nNote: this is not the same as your working directory or your home directory."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#your-r-installation",
    "href": "materials/day-1-session-1-introduction.html#your-r-installation",
    "title": "📦 Building tidy tools",
    "section": "Your R installation",
    "text": "Your R installation\n\nlist.files(R.home())\n\n [1] \"bin\"          \"COPYING\"      \"doc\"          \"etc\"          \"include\"     \n [6] \"lib\"          \"library\"      \"modules\"      \"share\"        \"SVN-REVISION\""
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#your-library",
    "href": "materials/day-1-session-1-introduction.html#your-library",
    "title": "📦 Building tidy tools",
    "section": "Your library",
    "text": "Your library\n\n.Library\n\n[1] \"/opt/R/4.2.0/lib/R/library\""
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#your-library-1",
    "href": "materials/day-1-session-1-introduction.html#your-library-1",
    "title": "📦 Building tidy tools",
    "section": "Your library",
    "text": "Your library\n\ndir(.Library)\n\n [1] \"base\"         \"boot\"         \"class\"        \"cluster\"      \"codetools\"   \n [6] \"compiler\"     \"datasets\"     \"foreign\"      \"graphics\"     \"grDevices\"   \n[11] \"grid\"         \"KernSmooth\"   \"lattice\"      \"MASS\"         \"Matrix\"      \n[16] \"methods\"      \"mgcv\"         \"nlme\"         \"nnet\"         \"parallel\"    \n[21] \"rpart\"        \"spatial\"      \"splines\"      \"stats\"        \"stats4\"      \n[26] \"survival\"     \"tcltk\"        \"tools\"        \"translations\" \"utils\""
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#the-ussie-package",
    "href": "materials/day-1-session-1-introduction.html#the-ussie-package",
    "title": "📦 Building tidy tools",
    "section": "The ussie package",
    "text": "The ussie package\nWhere we are going. discuss some of the files"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-1",
    "href": "materials/day-1-session-1-introduction.html#package-states-1",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\nThere are five states a package can be in:\n\nsource\nbundled\nbinary\ninstalled\nin-memory\n\n\n\nHaving a understanding of the different states a package can be helpful in understanding package development."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-2",
    "href": "materials/day-1-session-1-introduction.html#package-states-2",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\n\n\n\nSchematic of methods for moving between package states\n\n\n\n\nFigure from R Packages (H. Wickham and Bryan 2020)"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-3",
    "href": "materials/day-1-session-1-introduction.html#package-states-3",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\n\n\n\n\nsource\n\nbundled\nbinary\ninstalled\nin-memory\n\n\nWhat you create and work on.\nSpecific directory structure with some particular components e.g., DESCRIPTION, an R/ directory."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-4",
    "href": "materials/day-1-session-1-introduction.html#package-states-4",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\n\n\n\nsource\n\nbundled\n\nbinary\ninstalled\nin-memory\n\n\nAlso known as “source tarballs”.\nPackage files compressed to single file.\nConventionally .tar.gz\nYou don’t normally need to make one.\nUnpacked it looks very like the source package"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-5",
    "href": "materials/day-1-session-1-introduction.html#package-states-5",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\n\n\n\nsource\nbundled\n\nbinary\n\ninstalled\nin-memory\n\n\nPackage distribution for users w/o dev tools\nAlso a single file\nPlatform specific: .tgz (Mac) .zip (Windows)\nPackage developers submit a bundle to CRAN; CRAN makes and distributes binaries\ninstall.packages()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-6",
    "href": "materials/day-1-session-1-introduction.html#package-states-6",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\n\n\n\nsource\nbundled\nbinary\n\ninstalled\n\nin-memory\n\n\nA binary package that’s been decompressed into a package library\nCommand line tool R CMD INSTALL powers all package installation"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#package-states-7",
    "href": "materials/day-1-session-1-introduction.html#package-states-7",
    "title": "📦 Building tidy tools",
    "section": "Package states",
    "text": "Package states\n\n\n\nsource\nbundled\nbinary\ninstalled\n\nin-memory\n\n\n\nIf a package is installed, library() makes its function available by loading the package into memory and attaching it to the search path.\nWe do not use library() for packages we are working on\ndevtools::load_all() loads a source package directly into memory."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#create-a-package-1",
    "href": "materials/day-1-session-1-introduction.html#create-a-package-1",
    "title": "📦 Building tidy tools",
    "section": "Create a package",
    "text": "Create a package\nWe will create a version controlled package called ussie with a remote repo on GitHub.\n\n\n\nussie will allow you to work with European football league data supplied by the engsoccerdata package Curley (2016)\n\n\n\n\nThe CRAN version of engsoccerdata has data from the start of the league until 2016 for england, germany, holland, italy and spain\n\n\n\n\nBUT the format of the data is not the same for all countries!!"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#about-engsoccerdata",
    "href": "materials/day-1-session-1-introduction.html#about-engsoccerdata",
    "title": "📦 Building tidy tools",
    "section": "About engsoccerdata",
    "text": "About engsoccerdata\n\ndplyr::glimpse(engsoccerdata::england)\n\nRows: 192,004\nColumns: 12\n$ Date     <fct> 1888-12-15, 1889-01-19, 1889-03-23, 1888-12-01, 1888-10-13, 1…\n$ Season   <dbl> 1888, 1888, 1888, 1888, 1888, 1888, 1888, 1888, 1888, 1888, 1…\n$ home     <fct> Accrington F.C., Accrington F.C., Accrington F.C., Accrington…\n$ visitor  <fct> Aston Villa, Blackburn Rovers, Bolton Wanderers, Burnley, Der…\n$ FT       <fct> 1-1, 0-2, 2-3, 5-1, 6-2, 3-1, 1-2, 0-0, 2-0, 2-1, 4-4, 4-3, 6…\n$ hgoal    <dbl> 1, 0, 2, 5, 6, 3, 1, 0, 2, 2, 4, 4, 6, 6, 4, 4, 2, 9, 0, 5, 2…\n$ vgoal    <dbl> 1, 2, 3, 1, 2, 1, 2, 0, 0, 1, 4, 3, 1, 2, 2, 2, 1, 1, 2, 1, 0…\n$ division <fct> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ tier     <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ totgoal  <dbl> 2, 2, 5, 6, 8, 4, 3, 0, 2, 3, 8, 7, 7, 8, 6, 6, 3, 10, 2, 6, …\n$ goaldif  <dbl> 0, -2, -1, 4, 4, 2, -1, 0, 2, 1, 0, 1, 5, 4, 2, 2, 1, 8, -2, …\n$ result   <fct> D, A, A, H, H, H, A, D, H, H, D, H, H, H, H, H, H, H, A, H, H…\n\n\n\n\n\ndplyr::glimpse(engsoccerdata::spain)\n\nRows: 23,915\nColumns: 12\n$ Date    <chr> \"1929-02-10\", \"1929-02-10\", \"1929-02-10\", \"1929-02-10\", \"1929-…\n$ Season  <dbl> 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 19…\n$ home    <chr> \"Arenas de Getxo\", \"Espanyol Barcelona\", \"Real Madrid\", \"Real …\n$ visitor <chr> \"Atletico Madrid\", \"Real Union\", \"CE Europa\", \"Athletic Bilbao…\n$ HT      <chr> \"0-2\", \"1-0\", \"0-0\", \"1-1\", \"0-0\", \"0-1\", \"3-0\", \"0-3\", \"0-1\",…\n$ FT      <chr> \"2-3\", \"3-2\", \"5-0\", \"1-1\", \"0-2\", \"1-2\", \"9-0\", \"0-3\", \"3-1\",…\n$ hgoal   <dbl> 2, 3, 5, 1, 0, 1, 9, 0, 3, 5, 3, 3, 1, 0, 2, 1, 2, 3, 2, 2, 3,…\n$ vgoal   <dbl> 3, 2, 0, 1, 2, 2, 0, 3, 1, 2, 0, 1, 1, 4, 1, 2, 1, 0, 2, 0, 3,…\n$ tier    <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ round   <chr> \"league\", \"league\", \"league\", \"league\", \"league\", \"league\", \"l…\n$ group   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ notes   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#first-function",
    "href": "materials/day-1-session-1-introduction.html#first-function",
    "title": "📦 Building tidy tools",
    "section": "First function",
    "text": "First function\nSo the first function in our ussie package will turn these in to standard formats:\n\nuse only the common columns\ngive the same column the same data type"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#create-a-package-2",
    "href": "materials/day-1-session-1-introduction.html#create-a-package-2",
    "title": "📦 Building tidy tools",
    "section": "Create a package",
    "text": "Create a package\nBe deliberate about where you create your package\nDo not nest inside another RStudio project, R package or git repo.\n\n\n🎬 Create a package:\n\nusethis::create_package(\"~/Desktop/ussie\")\n\n\n\nYou may want a different path"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section",
    "href": "materials/day-1-session-1-introduction.html#section",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "√ Creating 'C:/Users/er13/Desktop/ussie/'\n√ Setting active project to 'C:/Users/er13/Desktop/ussie'\n√ Creating 'R/'\n√ Writing 'DESCRIPTION'\nPackage: ussie\nTitle: What the Package Does (One Line, Title Case)\nVersion: 0.0.0.9000\nAuthors\\@R (parsed):\n   * First Last \\<first.last\\@example.com\\> \\[aut, cre\\] (YOUR-ORCID-ID)\nDescription: What the package does (one paragraph).\nLicense: \\`use_mit_license()\\`, \\`use_gpl3_license()\\` or friends to\n    pick a license\nEncoding: UTF-8\nLazyData: true\nRoxygen: list(markdown = TRUE)\nRoxygenNote: 7.1.1\n√ Writing 'NAMESPACE'\n√ Writing 'ussie.Rproj'\n√ Adding '.Rproj.user' to '.gitignore'\n√ Adding '\\^ussie\\\\\\\\.Rproj\\$', '\\^\\\\\\\\.Rproj\\\\\\\\.user\\$' to '.Rbuildignore'\n√ Opening 'C:/Users/er13/Desktop/ussie/' in new RStudio session\n√ Setting active project to '\\<no active project\\>'"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#create_package",
    "href": "materials/day-1-session-1-introduction.html#create_package",
    "title": "📦 Building tidy tools",
    "section": "create_package()",
    "text": "create_package()\nWhat happens when we run create_package()?\n\nR will create a folder called ussie which is a package and an RStudio project\nrestart R in the new project\ncreate some infrastructure for your package\nstart the RStudio Build pane\n\n\n\ncontinued….."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#create_package-1",
    "href": "materials/day-1-session-1-introduction.html#create_package-1",
    "title": "📦 Building tidy tools",
    "section": "create_package()",
    "text": "create_package()\nWhat happens when we run create_package()?\n\nussie.Rproj\nDESCRIPTION provides metadata about your package.\nThe R/ directory is where we will put .R files with function definitions.\nNAMESPACE declares the functions your package exports and the functions your package imports from other packages.\n\n\n\ncontinued….."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#create_package-2",
    "href": "materials/day-1-session-1-introduction.html#create_package-2",
    "title": "📦 Building tidy tools",
    "section": "create_package()",
    "text": "create_package()\nWhat happens when we run create_package()?\n\n.Rbuildignore lists files that we need but that should not be included when building the R package from source.\n.gitignore anticipates Git usage and ignores some standard, behind-the-scenes files created by R and RStudio."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#make-package-a-git-repo",
    "href": "materials/day-1-session-1-introduction.html#make-package-a-git-repo",
    "title": "📦 Building tidy tools",
    "section": "Make package a git repo",
    "text": "Make package a git repo\n🎬 Make your package a git repository\n\nusethis::use_git()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section-1",
    "href": "materials/day-1-session-1-introduction.html#section-1",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "v Initialising Git repo\nv Adding '.Rhistory', '.Rdata', '.httr-oauth', '.DS_Store' to '.gitignore'\nThere are 5 uncommitted files:\n* '.gitignore'\n* '.Rbuildignore'\n* 'DESCRIPTION'\n* 'NAMESPACE'\n* 'ussieprac.Rproj'\nIs it ok to commit them?\n\n1: Nope\n2: Absolutely not\n3: I agree\n\n\n🎬 Choose the option that means yes!"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section-2",
    "href": "materials/day-1-session-1-introduction.html#section-2",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "v Adding files\nv Making a commit with message 'Initial commit'\n* A restart of RStudio is required to activate the Git pane\nRestart now?\n\n1: Negative\n2: No way\n3: Yeah\n\n\n🎬 Choose the option that means yes!\n\n\nYour session will restart."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#put-a-remote-copy-on-github",
    "href": "materials/day-1-session-1-introduction.html#put-a-remote-copy-on-github",
    "title": "📦 Building tidy tools",
    "section": "Put a remote copy on GitHub",
    "text": "Put a remote copy on GitHub\n🎬 Put on GitHub as a remote repository\n\nusethis::use_github()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section-3",
    "href": "materials/day-1-session-1-introduction.html#section-3",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "i Defaulting to 'https' Git protocol\nv Setting active project to 'C:/Users/er13/OneDrive - University of York/Desktop/Desktop/ussieprac'\nv Creating GitHub repository '3mmaRand/ussieprac'\nv Setting remote 'origin' to 'https://github.com/3mmaRand/ussieprac.git'\nv Setting URL field in DESCRIPTION to 'https://github.com/3mmaRand/ussieprac'\nv Setting BugReports field in DESCRIPTION to 'https://github.com/3mmaRand/ussieprac/issues'\nThere is 1 uncommitted file:\n* 'DESCRIPTION'\nIs it ok to commit it?\n\n1: Negative\n2: Yup\n3: Not now\n\n\n🎬 Choose the option that means yes!"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section-4",
    "href": "materials/day-1-session-1-introduction.html#section-4",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "v Adding files\nv Making a commit with message 'Add GitHub links to DESCRIPTION'\nv Pushing 'main' branch to GitHub and setting 'origin/main' as upstream branch\nv Opening URL 'https://github.com/3mmaRand/ussieprac'\n\n\n🎬 Quick check with:\n\nusethis::git_sitrep()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#add-the-first-function",
    "href": "materials/day-1-session-1-introduction.html#add-the-first-function",
    "title": "📦 Building tidy tools",
    "section": "Add the first function",
    "text": "Add the first function\nWe will add uss_make_matches()\nFunctions will go in an .R file.\n\n\n\nThere’s a usethis helper for adding .R files!\n\n\n\n\n\nusethis::use_r(\"file_name\")\n\n\n\nusethis::use_r() adds the file extension and saves in R/ folder"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#usethisuse_r",
    "href": "materials/day-1-session-1-introduction.html#usethisuse_r",
    "title": "📦 Building tidy tools",
    "section": "usethis::use_r()",
    "text": "usethis::use_r()\n🎬 Create a new R file in your package called uss_make_matches.R\n\n\n\n\nusethis::use_r(\"uss_make_matches\")\n\n√ Setting active project to 'C:/Users/er13/Desktop/ussie'\n• Modify 'R/uss_make_matches.R'\n• Call \\`use_test()\\` to create a matching test file\n\n\n\n\nWe want to be able to use the function like this: uss_make_matches(engsoccerdata::italy)"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#add-the-function",
    "href": "materials/day-1-session-1-introduction.html#add-the-function",
    "title": "📦 Building tidy tools",
    "section": "Add the function",
    "text": "Add the function\n🎬 Put the following code into your script:\n\nuss_make_matches <- function(data_engsoc) {\n  result <-\n    data_engsoc |>\n    tibble::as_tibble() |>\n    dplyr::transmute(\n      tier = as.integer(tier),\n      season = as.integer(Season),\n      date = as.Date(Date),\n      home = as.character(home),\n      visitor = as.character(visitor),\n      goals_home = as.integer(hgoal),\n      goals_visitor = as.integer(vgoal)\n    )\n  result\n}"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#development-workflow",
    "href": "materials/day-1-session-1-introduction.html#development-workflow",
    "title": "📦 Building tidy tools",
    "section": "Development workflow",
    "text": "Development workflow\nIn a normal script you might use:\n\nsource(\"R/uss_make_matches.R\")\n\n\n\n\nbut when building packages we use a devtools approach"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#development-workflow-1",
    "href": "materials/day-1-session-1-introduction.html#development-workflow-1",
    "title": "📦 Building tidy tools",
    "section": "Development workflow",
    "text": "Development workflow\n\nDevelopment workflow"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#devtoolsload_all",
    "href": "materials/day-1-session-1-introduction.html#devtoolsload_all",
    "title": "📦 Building tidy tools",
    "section": "devtools::load_all()",
    "text": "devtools::load_all()\n🎬 Load package with devtools::load_all().\n\ndevtools::load_all()\n\n\n# Loading ussie"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#test",
    "href": "materials/day-1-session-1-introduction.html#test",
    "title": "📦 Building tidy tools",
    "section": "Test",
    "text": "Test\nTest the uss_make_matches() function in the console.\n\nuss_make_matches(engsoccerdata::italy)\n\n\n\n# A tibble: 25,404 x 7\n    tier season date       home      visitor goals_home goals_visitor\n   <int>  <int> <date>     <chr>     <chr>        <int>         <int>\n 1     1   1934 1934-09-30 Lazio Ro~ US Liv~          6             1\n 2     1   1934 1934-09-30 Torino FC Unione~          3             1\n 3     1   1934 1934-09-30 Sampierd~ Bologn~          2             1\n 4     1   1934 1934-09-30 SSC Napo~ US Ale~          0             1\n 5     1   1934 1934-09-30 ACF Fior~ AS Roma          4             1\n 6     1   1934 1934-09-30 Brescia ~ Juvent~          0             2\n 7     1   1934 1934-09-30 Inter     US Pal~          3             0\n 8     1   1934 1934-09-30 Pro Verc~ AC Mil~          1             2\n 9     1   1934 1934-10-07 AC Milan  ACF Fi~          1             1\n10     1   1934 1934-10-07 US Livor~ Inter            1             1\n# ... with 25,394 more rows\n \n🤔 There’s no column for the country - that could be confusing"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#update-the-function",
    "href": "materials/day-1-session-1-introduction.html#update-the-function",
    "title": "📦 Building tidy tools",
    "section": "Update the function",
    "text": "Update the function\n🎬 Change the function so it takes an additional argument which is the name of the country. The country name should be in column called “country”. The aim is to use the function like this:\n\nuss_make_matches(engsoccerdata::spain, \"Spain\")\n\n\n\n\n🎬 Load with devtools::load_all() and test the updated function."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#an-answer",
    "href": "materials/day-1-session-1-introduction.html#an-answer",
    "title": "📦 Building tidy tools",
    "section": "An answer",
    "text": "An answer\n\nuss_make_matches <- function(data_engsoc, country) {\n  result <-\n    data_engsoc |>\n    tibble::as_tibble() |>\n    dplyr::transmute(\n      country = as.character(country),\n      tier = as.integer(tier),\n      season = as.integer(Season),\n      date = as.Date(Date),\n      home = as.character(home),\n      visitor = as.character(visitor),\n      goals_home = as.integer(hgoal),\n      goals_visitor = as.integer(vgoal)\n    )\n  result\n}"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#check-your-package-1",
    "href": "materials/day-1-session-1-introduction.html#check-your-package-1",
    "title": "📦 Building tidy tools",
    "section": "Check your package",
    "text": "Check your package\nR CMD check is the gold standard for checking that an R package is in full working order.\n\n\nIt is a programme that is executed in the shell.\n\n\nHowever, devtools has the check() function to allow you to run this without leaving your R session."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#devtoolscheck",
    "href": "materials/day-1-session-1-introduction.html#devtoolscheck",
    "title": "📦 Building tidy tools",
    "section": "devtools::check()",
    "text": "devtools::check()\n🎬 Check your package:\n\ndevtools::check()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section-5",
    "href": "materials/day-1-session-1-introduction.html#section-5",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "-- R CMD check results -------------------------- ussie 0.0.0.9000 ----\nDuration: 37.6s\n\n> checking DESCRIPTION meta-information ... WARNING\n  Non-standard license specification:\n    \\`use_mit_license()\\`, \\`use_gpl3_license()\\` or friends to pick a\n    license\n  Standardizable: FALSE\n\n> checking dependencies in R code ... WARNING\n  '::' or ':::' imports not declared from:\n    'dplyr' 'tibble'\n\n> checking for unstated dependencies in examples ... WARNING\n  '::' or ':::' import not declared from: 'engsoccerdata'\n\n> checking R code for possible problems ... NOTE\n  uss_make_matches: no visible binding for global variable 'tier'\n  uss_make_matches: no visible binding for global variable 'Season'\n  uss_make_matches: no visible binding for global variable 'Date'\n  uss_make_matches: no visible binding for global variable 'home'\n  uss_make_matches: no visible binding for global variable 'visitor'\n  uss_make_matches: no visible binding for global variable 'hgoal'\n  uss_make_matches: no visible binding for global variable 'vgoal'\n  Undefined global functions or variables:\n    Date Season hgoal home tier vgoal visitor\n\n0 errors v | 3 warnings x | 1 note x"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#aside-in-case-of-error",
    "href": "materials/day-1-session-1-introduction.html#aside-in-case-of-error",
    "title": "📦 Building tidy tools",
    "section": "Aside: in case of error",
    "text": "Aside: in case of error\nOn running devtools::check() you may get an error if you are using a networked drive.\nUpdating ussie documentation  \nError: The specified file is not readable: path-to\\ussie\\NAMESPACE\n\n\nThis is covered here and can be fixed."
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#aside-in-case-of-error-1",
    "href": "materials/day-1-session-1-introduction.html#aside-in-case-of-error-1",
    "title": "📦 Building tidy tools",
    "section": "Aside: in case of error",
    "text": "Aside: in case of error\nSave a copy of this file:\nfix_for_networked_drives.R\nSave it somewhere other than the ussie directory\nOpen the file from the ussie project session\nRun the whole file\nYou should now find that check() proceeds normally"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#section-6",
    "href": "materials/day-1-session-1-introduction.html#section-6",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "-- R CMD check results -------------------------- ussie 0.0.0.9000 ----\nDuration: 37.6s\n\n> checking DESCRIPTION meta-information ... WARNING\n  Non-standard license specification:\n    \\`use_mit_license()\\`, \\`use_gpl3_license()\\` or friends to pick a\n    license\n  Standardizable: FALSE\n\n> checking dependencies in R code ... WARNING\n  '::' or ':::' imports not declared from:\n    'dplyr' 'tibble'\n\n> checking for unstated dependencies in examples ... WARNING\n  '::' or ':::' import not declared from: 'engsoccerdata'\n\n> checking R code for possible problems ... NOTE\n  uss_make_matches: no visible binding for global variable 'tier'\n  uss_make_matches: no visible binding for global variable 'Season'\n  uss_make_matches: no visible binding for global variable 'Date'\n  uss_make_matches: no visible binding for global variable 'home'\n  uss_make_matches: no visible binding for global variable 'visitor'\n  uss_make_matches: no visible binding for global variable 'hgoal'\n  uss_make_matches: no visible binding for global variable 'vgoal'\n  Undefined global functions or variables:\n    Date Season hgoal home tier vgoal visitor\n\n0 errors v | 3 warnings x | 1 note x"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#errors-v-3-warnings-x-1-note-x",
    "href": "materials/day-1-session-1-introduction.html#errors-v-3-warnings-x-1-note-x",
    "title": "📦 Building tidy tools",
    "section": "0 errors v | 3 warnings x | 1 note x",
    "text": "0 errors v | 3 warnings x | 1 note x\n\nchecking DESCRIPTION meta-information … WARNING\nNon-standard license specification\n✅ Next!\nchecking dependencies in R code … WARNING\n‘::’ or ‘:::’ imports not declared\n✅ Next!\nchecking for unstated dependencies in examples … WARNING\n‘::’ or ‘:::’ import not declared from: ‘engsoccerdata’ ✅ Next!\nno visible binding for global variables\n✅ Tomorrow!"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#add-a-license",
    "href": "materials/day-1-session-1-introduction.html#add-a-license",
    "title": "📦 Building tidy tools",
    "section": "Add a license",
    "text": "Add a license\nusethis helps out again!\n\n\nuse_mit_license(), use_agpl_license(), use_ccby_license() etc\n\n\n🎬 Add a MIT license1 - use your own name!\n\nusethis::use_mit_license(\"Emma Rand\") \n\nMIT: Simple and permissive license that lets people use and freely distribute your code"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#use_mit_license",
    "href": "materials/day-1-session-1-introduction.html#use_mit_license",
    "title": "📦 Building tidy tools",
    "section": "use_mit_license()",
    "text": "use_mit_license()\n🎬 What files have appeared?\n\n\n🎬 How has the DESCRIPTION file changed?\n\n\n🎬 Run devtools::check() again. Has one of the warnings disappeared?"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#summary",
    "href": "materials/day-1-session-1-introduction.html#summary",
    "title": "📦 Building tidy tools",
    "section": "Summary",
    "text": "Summary\n\nIt is useful to make a package\n\nit is fairly easy with devtools\nit will help you work more reproducibly\n\nPackages can be in one of 5 states:\n\nsource - what you write\nbundled - source compressed to single file, submitted to CRAN\nbinary - distribution for users w/o devtools\ninstalled - a binary that’s been decompressed\nin-memory - installed package that has been loaded"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#summary-continued",
    "href": "materials/day-1-session-1-introduction.html#summary-continued",
    "title": "📦 Building tidy tools",
    "section": "Summary continued",
    "text": "Summary continued\n\nA minimal package comprises\n\na folder which is a package and a RProj\nDESCRIPTION, NAMESPACE, .Rbuildignore .gitignore\nR/ directory for functions\n\nWe add functions with usethis:use_r()\nWe use the package interactively with devtools::load_all()\nWe use devtools::check() to execute R CMD check\nWe add a license with usethis::use_mit_license()"
  },
  {
    "objectID": "materials/day-1-session-1-introduction.html#references",
    "href": "materials/day-1-session-1-introduction.html#references",
    "title": "📦 Building tidy tools",
    "section": "References",
    "text": "References\n\n\nhttps://bit.ly/..\n\n\n\nCurley, James. 2016. “Engsoccerdata: English and European Soccer Results 1871-2016.” https://CRAN.R-project.org/package=engsoccerdata.\n\n\nWickham, Charlotte, and Hadley Wickham. 2021. Building Tidy Tools. rstudio::conf 2020. https://github.com/rstudio-conf-2020/build-tidy-tools.\n\n\nWickham, Hadley, and Jenny Bryan. 2020. R Packages. The work-in-progress 2nd edition. Online. https://r-pkgs.org/index.html."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#learning-objectives",
    "href": "materials/day-1-session-2-doc-minimal.html#learning-objectives",
    "title": "📦 Building tidy tools",
    "section": "Learning Objectives",
    "text": "Learning Objectives\nAt the end of this section you will be able to:\n\nlo\nlo\nlo\nlo"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#levels-of-package-documentation",
    "href": "materials/day-1-session-2-doc-minimal.html#levels-of-package-documentation",
    "title": "📦 Building tidy tools",
    "section": "Levels of package documentation",
    "text": "Levels of package documentation\n\nMetadata: The DESCRIPTION file – “what’s in this package?”\nObject documentation: for functions and data\n\n\n\nVignettes: Long form documentation\n\n\n\npkgdown sites: Websites for your package!"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#sample-description",
    "href": "materials/day-1-session-2-doc-minimal.html#sample-description",
    "title": "📦 Building tidy tools",
    "section": "Sample DESCRIPTION",
    "text": "Sample DESCRIPTION\n🎬 Take a look at the DESCRIPTION for the following packages. What’s common? What’s different?\n\nggplot2 Wickham (2016)\n\nCRAN Package page\nDESCRIPTION on GitHub\n\npalmerpenguins Horst, Hill, and Gorman (2020)\n\nCRAN Package page\nDESCRIPTION on GitHub"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#metadata-in-description",
    "href": "materials/day-1-session-2-doc-minimal.html#metadata-in-description",
    "title": "📦 Building tidy tools",
    "section": "Metadata in DESCRIPTION",
    "text": "Metadata in DESCRIPTION\n\nTitle: One line, title case, with no period. Fewer than 65 characters.\nVersion\n\nfor release: MAJOR.MINOR.PATCH version.\nfor development version building on version MAJOR.MINOR.PATCH, use: MAJOR.MINOR.PATCH.9000\n\nAuthors@R:\n\n“aut” means author, “cre” means creator, “ctb” means contributor."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#update-description",
    "href": "materials/day-1-session-2-doc-minimal.html#update-description",
    "title": "📦 Building tidy tools",
    "section": "Update DESCRIPTION",
    "text": "Update DESCRIPTION\n🎬 Add a title\n\n\n🎬 You should find that your information as an author is already included because you edited your .RProfile at the start of the session"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#update-description-1",
    "href": "materials/day-1-session-2-doc-minimal.html#update-description-1",
    "title": "📦 Building tidy tools",
    "section": "Update DESCRIPTION",
    "text": "Update DESCRIPTION\nPackage: ussie\nTitle: Work with European Football League Data\nVersion: 0.0.0.9000\nAuthors@R: \n    person(given = \"Emma\",\n           family = \"Rand\", \n           email = \"emma.rand@york.ac.uk\",\n           role = c(\"aut\", \"cre\"),\n           comment = c(ORCID = \"0000-0002-1358-8275\"))\nDescription: What the package does (one paragraph).\nLicense: MIT + file LICENSE\nEncoding: UTF-8\nRoxygen: list(markdown = TRUE)\nRoxygenNote: 7.2.0\nURL: https://github.com/3mmaRand/ussies\nBugReports: https://github.com/3mmaRand/ussies/issues"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#metadata-in-description-1",
    "href": "materials/day-1-session-2-doc-minimal.html#metadata-in-description-1",
    "title": "📦 Building tidy tools",
    "section": "Metadata in DESCRIPTION",
    "text": "Metadata in DESCRIPTION\n\nDescription: One paragraph describing what the package does. Keep the width of the paragraph to 80 characters; indent subsequent lines with 4 spaces\nLicense\nEncoding: How to encode text, use UTF-8 encoding.\nLazyData: Use true to lazy-load data sets in the package."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#object-documentation-1",
    "href": "materials/day-1-session-2-doc-minimal.html#object-documentation-1",
    "title": "📦 Building tidy tools",
    "section": "Object documentation",
    "text": "Object documentation\n\nObject documentation is what you see when you use ? or help()\nThese helps files are written in a special “R documentation” format: .Rd\n.Rd resembles LaTeX,"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#manuss_make_matches.rd",
    "href": "materials/day-1-session-2-doc-minimal.html#manuss_make_matches.rd",
    "title": "📦 Building tidy tools",
    "section": "man/uss_make_matches.Rd",
    "text": "man/uss_make_matches.Rd\n\\name{uss_make_matches}\n\\alias{uss_make_matches}\n\\title{Make a standard league-play tibble}\n\\usage{\nuss_make_matches(data_engsoc, country)\n}\n\\arguments{\n\\item{data_engsoc}{\\code{data.frame} obtained from {engsoccerdata}. One of:\nengsoccerdata::england, engsoccerdata::germany, engsoccerdata::holland,\nengsoccerdata::italy, engsoccerdata::spain}\n\n\\item{country}{\\code{character} scalar, specifies the league.}\n}\n\\value{\na tibble with columns \\code{country}, \\code{date}, \\code{season}, \\code{tier}, \\code{home},\n\\code{visitor}, \\code{goals_home}, \\code{goals_visitor}.\n}\n\\description{\nGiven a league-play data frame from {engsoccer}, returns a tibble with\nstandardised colomn-names and types, e.g. \\code{date} is a \\code{Date}.\n}\n\\examples{\nuss_make_matches(engsoccerdata::italy, \"Italy\")\nuss_make_matches(engsoccerdata::spain, \"Spain\")\n\n}"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#object-documentation-2",
    "href": "materials/day-1-session-2-doc-minimal.html#object-documentation-2",
    "title": "📦 Building tidy tools",
    "section": "Object documentation",
    "text": "Object documentation\n🥳 We don’t have to write it!!\n\n\nWe write “roxygen comments” in the .R files"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#roxygen-comments",
    "href": "materials/day-1-session-2-doc-minimal.html#roxygen-comments",
    "title": "📦 Building tidy tools",
    "section": "Roxygen comments",
    "text": "Roxygen comments\n#' Make a standard league-play tibble\n#'\n#' Given a league-play data frame from {engsoccer}, returns a tibble with\n#' standardised colomn-names and types, e.g. `date` is a `Date`.\n#'\n#' @param data_engsoc `data.frame` obtained from {engsoccerdata}. One of:\n#'   engsoccerdata::england, engsoccerdata::germany, engsoccerdata::holland,\n#'   engsoccerdata::italy, engsoccerdata::spain\n#'\n#' @param country `character` scalar, specifies the league.\n#'\n#' @return a tibble with columns `country`, `date`, `season`, `tier`, `home`,\n#'   `visitor`, `goals_home`, `goals_visitor`.\n#'\n#' @export\n#'\n#' @examples\n#' uss_make_matches(engsoccerdata::italy, \"Italy\")\n#' uss_make_matches(engsoccerdata::spain, \"Spain\")\n#'\n\nthe #' indicates it is a roxygen comment\nroxygen2 does the work but we can use devtools functions to call them"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#object-documentation-workflow",
    "href": "materials/day-1-session-2-doc-minimal.html#object-documentation-workflow",
    "title": "📦 Building tidy tools",
    "section": "Object documentation workflow",
    "text": "Object documentation workflow\n\nAdd roxygen comments to your .R files.\nRun devtools::document() to convert roxygen comments to .Rd files.\nLoad the package with devtools::load_all()\nPreview documentation with ?\nRepeat until the documentation looks the way you want."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#document-your-function",
    "href": "materials/day-1-session-2-doc-minimal.html#document-your-function",
    "title": "📦 Building tidy tools",
    "section": "Document your function",
    "text": "Document your function\n🎬 Open uss_make_matches.R\n🎬 Put your cursor anywhere in the function and do Code | Insert Roxygen Documentation (Ctrl-Alt-Shift-R)"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#document-your-function-1",
    "href": "materials/day-1-session-2-doc-minimal.html#document-your-function-1",
    "title": "📦 Building tidy tools",
    "section": "Document your function",
    "text": "Document your function\n#' Title\n#'\n#' @param data_engsoc \n#' @param country \n#'\n#' @return\n#' @export\n#'\n#' @examples\nuss_make_matches <- function(data_engsoc, country) {\n  result <-\n    data_engsoc |>\n    tibble::as_tibble() |>\n    dplyr::transmute(\n      country = as.character(country),\n      tier = as.integer(tier),\n      season = as.integer(Season),\n      date = as.Date(Date),\n      home = as.character(home),\n      visitor = as.character(visitor),\n      goals_home = as.integer(hgoal),\n      goals_visitor = as.integer(vgoal)\n    )\n  result\n}"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#document-your-function-2",
    "href": "materials/day-1-session-2-doc-minimal.html#document-your-function-2",
    "title": "📦 Building tidy tools",
    "section": "Document your function",
    "text": "Document your function\n\n#' indicates it is a roxygen comment\n@ indicates a roxygen tag\n\n@param arg — describe the inputs\n@examples— show how the function works\n@seealso — point out related functions\n@returns — describe the outputs\n@param arg — is this a user visible function"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#document-your-function-3",
    "href": "materials/day-1-session-2-doc-minimal.html#document-your-function-3",
    "title": "📦 Building tidy tools",
    "section": "Document your function",
    "text": "Document your function\n🎬 Give your function a title and a brief description\n🎬 Define the two parameters\n🎬 Describe what the function returns"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#document-your-function-4",
    "href": "materials/day-1-session-2-doc-minimal.html#document-your-function-4",
    "title": "📦 Building tidy tools",
    "section": "Document your function",
    "text": "Document your function\n#' Make a standard league-play tibble\n#'\n#' Given a league-play data frame from {engsoccer}, returns a tibble with\n#' standardised colomn-names and types, e.g. `date` is a `Date`.\n#'\n#' @param data_engsoc `data.frame` obtained from {engsoccerdata}. One of:\n#'   engsoccerdata::england, engsoccerdata::germany, engsoccerdata::holland,\n#'   engsoccerdata::italy, engsoccerdata::spain\n#'\n#' @param country `character` scalar, specifies the league.\n#'\n#' @return a tibble with columns `country`, `date`, `season`, `tier`, `home`,\n#'   `visitor`, `goals_home`, `goals_visitor`."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#take-a-look-at-your-documentation",
    "href": "materials/day-1-session-2-doc-minimal.html#take-a-look-at-your-documentation",
    "title": "📦 Building tidy tools",
    "section": "Take a look at your documentation",
    "text": "Take a look at your documentation\n🎬 Save uss_make_matches.R and run devtools::document()\n\nWarning message:\n[uss_make_matches.R:17] @examples requires a value\nWe will that fix later!\n\n\n🎬 Load the package : devtools::load_all()\n🎬 Preview the documentation with ?uss_make_matches"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#add-examples",
    "href": "materials/day-1-session-2-doc-minimal.html#add-examples",
    "title": "📦 Building tidy tools",
    "section": "Add examples",
    "text": "Add examples\n🎬 Under @examples, add one example for using your function\n\n#' @examples\n#' uss_make_matches(engsoccerdata::italy, \"Italy\")\n#' uss_make_matches(engsoccerdata::spain, \"Spain\")\n#'"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#take-a-look-at-your-documentation-1",
    "href": "materials/day-1-session-2-doc-minimal.html#take-a-look-at-your-documentation-1",
    "title": "📦 Building tidy tools",
    "section": "Take a look at your documentation",
    "text": "Take a look at your documentation\n🎬 Save uss_make_matches.R, run devtools::document() followed by devtools::load_all()\n\n🎬 Preview the documentation with ?uss_make_matches and edit your documentation if anything needs to be changed"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#check",
    "href": "materials/day-1-session-2-doc-minimal.html#check",
    "title": "📦 Building tidy tools",
    "section": "check()",
    "text": "check()"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#add-another-function",
    "href": "materials/day-1-session-2-doc-minimal.html#add-another-function",
    "title": "📦 Building tidy tools",
    "section": "add another function?",
    "text": "add another function?"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#document-it",
    "href": "materials/day-1-session-2-doc-minimal.html#document-it",
    "title": "📦 Building tidy tools",
    "section": "document it?",
    "text": "document it?"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#check-1",
    "href": "materials/day-1-session-2-doc-minimal.html#check-1",
    "title": "📦 Building tidy tools",
    "section": "check",
    "text": "check"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#remember-this",
    "href": "materials/day-1-session-2-doc-minimal.html#remember-this",
    "title": "📦 Building tidy tools",
    "section": "Remember this?",
    "text": "Remember this?\n> checking dependencies in R code ... WARNING\n  '::' or ':::' imports not declared from:\n    'dplyr' 'tibble'\n\n> checking for unstated dependencies in examples ... WARNING\n  '::' or ':::' import not declared from: 'engsoccerdata''\n\nWe have used packages that we have not declared officially."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#package-dependencies",
    "href": "materials/day-1-session-2-doc-minimal.html#package-dependencies",
    "title": "📦 Building tidy tools",
    "section": "Package dependencies",
    "text": "Package dependencies\n\nImports: must be installed for your package to work. If they’re not, they will get installed.\nSuggests: used by your package, but not required. Might provide data for examples, to run tests, build vignettes.\nDepends: Avoid where possible. When your package requires a specific version of R, e.g. Depends: R (>= 3.4.0). Think critically: downstream effects on packages that depend on your package."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#package-dependencies-1",
    "href": "materials/day-1-session-2-doc-minimal.html#package-dependencies-1",
    "title": "📦 Building tidy tools",
    "section": "Package dependencies",
    "text": "Package dependencies\nuse_package(package, type = \"Imports\")\n\nType – one of “Imports”, “Depends”, “Suggests”, “Enhances”, or “LinkingTo”\nThe default is “Imports”"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#usethisuse_package",
    "href": "materials/day-1-session-2-doc-minimal.html#usethisuse_package",
    "title": "📦 Building tidy tools",
    "section": "usethis::use_package()",
    "text": "usethis::use_package()\n🎬 Use usethis::use_package() to add the dplyr package to Imports\n\nusethis::use_package(\"dplyr\")\n\n\nv Setting active project to 'C:/Users/er13/OneDrive - University of York/Desktop/Desktop/ussie'\nv Adding 'dplyr' to Imports field in DESCRIPTION\n* Refer to functions with `dplyr::fun()`\nLook how your DESCRIPTION file changed!"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#usethisuse_package-1",
    "href": "materials/day-1-session-2-doc-minimal.html#usethisuse_package-1",
    "title": "📦 Building tidy tools",
    "section": "usethis::use_package()",
    "text": "usethis::use_package()\nNote: we get reminded to “Refer to functions with dplyr::fun()”\nThat is, we do not use library(dplyr) to make functions available to our package.\n\n🎬 Repeat for tibble\n\nusethis::use_package(\"tibble\")"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#check-2",
    "href": "materials/day-1-session-2-doc-minimal.html#check-2",
    "title": "📦 Building tidy tools",
    "section": "check()",
    "text": "check()\n🎬 Run check() on your package again"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#section",
    "href": "materials/day-1-session-2-doc-minimal.html#section",
    "title": "📦 Building tidy tools",
    "section": "",
    "text": "-- R CMD check results -------------------------------- ussiesun 0.0.0.9000 ----\nDuration: 53.5s\n\n> checking for unstated dependencies in examples ... WARNING\n  '::' or ':::' import not declared from: 'engsoccerdata'\n\n> checking R code for possible problems ... NOTE\n  uss_make_matches: no visible binding for global variable 'tier'\n  uss_make_matches: no visible binding for global variable 'Season'\n  uss_make_matches: no visible binding for global variable 'Date'\n  uss_make_matches: no visible binding for global variable 'home'\n  uss_make_matches: no visible binding for global variable 'visitor'\n  uss_make_matches: no visible binding for global variable 'hgoal'\n  uss_make_matches: no visible binding for global variable 'vgoal'\n  Undefined global functions or variables:\n    Date Season hgoal home tier vgoal visitor\n\n0 errors v | 1 warning x | 1 note x"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#suggests",
    "href": "materials/day-1-session-2-doc-minimal.html#suggests",
    "title": "📦 Building tidy tools",
    "section": "Suggests",
    "text": "Suggests\n\nAre used by your package, but not required for it to work\nMight provide data for examples\n\nuss_make_matches.R\n#' @examples\n#' uss_make_matches(engsoccerdata::italy, \"Italy\")\n#' uss_make_matches(engsoccerdata::spain, \"Spain\")"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#suggests-1",
    "href": "materials/day-1-session-2-doc-minimal.html#suggests-1",
    "title": "📦 Building tidy tools",
    "section": "Suggests",
    "text": "Suggests\n🎬 Add engsoccerdata\n\nusethis::use_package(\"engsoccerdata\", type = \"Suggests\")\n\nv Setting active project to 'C:/Users/er13/OneDrive - University of York/Desktop/Desktop/ussie'\nv Adding 'engsoccerdata' to Suggests field in DESCRIPTION\n* Use `requireNamespace(\"engsoccerdata\", quietly = TRUE)` to test if package is installed\n* Then directly refer to functions with `engsoccerdata::fun()`"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#suggests-2",
    "href": "materials/day-1-session-2-doc-minimal.html#suggests-2",
    "title": "📦 Building tidy tools",
    "section": "Suggests",
    "text": "Suggests\n\nPackages listed in Suggests are not automatically installed along with your package.\nThis means that you can’t assume the package is available\n\n* Use `requireNamespace(\"engsoccerdata\", quietly = TRUE)` to test if package is installed"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#citation.cff",
    "href": "materials/day-1-session-2-doc-minimal.html#citation.cff",
    "title": "📦 Building tidy tools",
    "section": "CITATION.cff",
    "text": "CITATION.cff\nhttps://docs.ropensci.org/cffr/\n\ncffr::cff_write()\n\n\nCITATION.cff generated\nAdding  CITATION.cff to .Rbuildignore\n\ncff_validate results-----\nCongratulations! This .cff file is valid"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#summary",
    "href": "materials/day-1-session-2-doc-minimal.html#summary",
    "title": "📦 Building tidy tools",
    "section": "Summary",
    "text": "Summary\n\n.\n\n.\n.\n\n.\n\n."
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#summary-continued",
    "href": "materials/day-1-session-2-doc-minimal.html#summary-continued",
    "title": "📦 Building tidy tools",
    "section": "Summary continued",
    "text": "Summary continued\n\n\nWe add documentation using roxygen2 and devtools::document()"
  },
  {
    "objectID": "materials/day-1-session-2-doc-minimal.html#references",
    "href": "materials/day-1-session-2-doc-minimal.html#references",
    "title": "📦 Building tidy tools",
    "section": "References",
    "text": "References\n\n\nhttps://bit.ly/..\n\n\n\nHorst, Allison Marie, Alison Presmanes Hill, and Kristen B Gorman. 2020. “Palmerpenguins: Palmer Archipelago (Antarctica) Penguin Data.” https://allisonhorst.github.io/palmerpenguins/.\n\n\nWickham, Hadley. 2016. “Ggplot2: Elegant Graphics for Data Analysis.” https://ggplot2.tidyverse.org."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#learning-objectives",
    "href": "materials/day-2-session-2-side-effects.html#learning-objectives",
    "title": "📦 Building tidy tools",
    "section": "Learning objectives",
    "text": "Learning objectives\nAt the end of this section you will be able to:\n\nwrite effective error messages\ncreate validator functions\nmanage the global state (leave no footprints) using {withr}\ntest functions that use or cause side-effects\nuse snapshot testing"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#errors",
    "href": "materials/day-2-session-2-side-effects.html#errors",
    "title": "📦 Building tidy tools",
    "section": "Errors",
    "text": "Errors\n\nThe most common type of side-effect is the error condition.\n\n\n\nSometimes, error messages can be cryptic:\nseq[10]\nError in seq[10] : object of type 'closure' is not subsettable\n\n\n\n\nYou can write error messages that make things clearer for:\n\ndevelopers who call your functions\nend users"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#creating-an-error-condition",
    "href": "materials/day-2-session-2-side-effects.html#creating-an-error-condition",
    "title": "📦 Building tidy tools",
    "section": "Creating an error condition",
    "text": "Creating an error condition\nAn effective error condition has:\n\npredicate (logical expression used to identify condition)\nclear message for end user\nclass name for developer\nmore information for developer"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#using-clicli_abort",
    "href": "materials/day-2-session-2-side-effects.html#using-clicli_abort",
    "title": "📦 Building tidy tools",
    "section": "Using cli::cli_abort()",
    "text": "Using cli::cli_abort()\n# predicate\nif (y > 3) {\n  cli::cli_abort(\n    # message for end user\n    c(\n      \"{.var y} cannot be greater than 3.\", \n      x = \"{.var y} is {.val {y}}.\"\n    )\n    # class name\n    class = \"ussie_error_threshold\",  \n    # more information\n    y = y     \n  )\n}"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#predicate",
    "href": "materials/day-2-session-2-side-effects.html#predicate",
    "title": "📦 Building tidy tools",
    "section": "Predicate",
    "text": "Predicate\nPrefer:\n\nsimpler predicates and more error-conditions\n\nOver:\n\ncomplex predicates and fewer error-conditions\n\n\nFinding simplest set of predicates is just as challenging as finding the “right” names for functions and arguments."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#message",
    "href": "materials/day-2-session-2-side-effects.html#message",
    "title": "📦 Building tidy tools",
    "section": "Message",
    "text": "Message\nContent:\n\nhow did we violate the predicate?\n\n\nFormatting:\n\n{cli} provides powerful formatting tools:\n\nuse curly-braces and a tag, e.g. {.var y}\nuse more curly-braces to interpolate, e.g. {.val {y}}\n\nsee cli inline-markup for more details."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#class-name",
    "href": "materials/day-2-session-2-side-effects.html#class-name",
    "title": "📦 Building tidy tools",
    "section": "Class name",
    "text": "Class name\n\nA developer, calling your function, can use the class name to handle the error, if they want.\nConvention:\n\n\"{package}_error_{description}\""
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#additional-information",
    "href": "materials/day-2-session-2-side-effects.html#additional-information",
    "title": "📦 Building tidy tools",
    "section": "Additional information",
    "text": "Additional information\nThis “stuff” is also available to an error handler.\n\nProvide the data that went into the predicate.\nProvide name of variable, e.g. y = y.\nAvoid reserved names: message, class, call, body, footer, trace, parent, use_cli_format."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#validation",
    "href": "materials/day-2-session-2-side-effects.html#validation",
    "title": "📦 Building tidy tools",
    "section": "Validation",
    "text": "Validation\nIf there will be an error, surface it quickly.\nValidating the arguments to a function is one way to do this.\n\nFor example:\n\nis this a data frame?\ndoes this data frame have these columns?\n\n\n\nQuestions like these can be generalized into functions:\n\nthrow an error if you need to.\notherwise, return data argument invisibly."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#validate-string-values",
    "href": "materials/day-2-session-2-side-effects.html#validate-string-values",
    "title": "📦 Building tidy tools",
    "section": "Validate string-values",
    "text": "Validate string-values\nYou may be familiar with match.arg():\n\nuses “magic” to compare value (if any) to default\nargument default is vector of strings\n\nif value among defaults, return it - otherwise error\nif no value, return first value in default\n\n\n\nrlang::arg_match() does the same thing, but:\n\npartial match triggers error\nerror messages conform to tidyverse standards"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#snapshot-tests",
    "href": "materials/day-2-session-2-side-effects.html#snapshot-tests",
    "title": "📦 Building tidy tools",
    "section": "Snapshot tests",
    "text": "Snapshot tests\nDesigned for capturing side-effects:\n\nerror messages\ndplyr::glimpse() is a useful shortcut\n\n\nBe careful about accepting changes (don’t just accept).\nCan be temperamental - not run on CRAN.\nWe will go through, using examples."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#your-turn-2.2.1",
    "href": "materials/day-2-session-2-side-effects.html#your-turn-2.2.1",
    "title": "📦 Building tidy tools",
    "section": "Your turn \"2.2.1\"",
    "text": "Your turn \"2.2.1\"\nImplement validator-functions:\n\nis the country valid?\n\n\n\nOnly if needed, btt22::btt_reset_hard(\"2.2.1\")\n\n\n\nGet new files, btt22::btt_get(\"2.2.1\"):\n\nvalidate.R\ntest-validate.R"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#use-rlangarg_match",
    "href": "materials/day-2-session-2-side-effects.html#use-rlangarg_match",
    "title": "📦 Building tidy tools",
    "section": "Use rlang::arg_match()",
    "text": "Use rlang::arg_match()\n👉 devtools::load_all(), then:\n\n👉 uss_get_matches(\"italy\") 🎉\n👉 uss_get_matches(\"tatooine\") 🎉\n👉 uss_get_matches(\"ita\") 🤔\n\n\n\nget-matches.R:\n\nreplace match.arg() with rlang::arg_match()\n\ntest-get-matches.R:\n\nuncomment test for 2.2.1, then repeat 👉"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#build-error-constructor",
    "href": "materials/day-2-session-2-side-effects.html#build-error-constructor",
    "title": "📦 Building tidy tools",
    "section": "Build error constructor",
    "text": "Build error constructor\n\nusethis::use_package(\"cli\")\nreview validate_data_frame() (call argument)\nbuild constructor for validate_cols():\n\nsomething like {.field {cols}} may be useful\nactivate 2.2.1 tests in test-validate.R, as you go\n\nhold off on snapshot test (we’ll do together)\n\n\n\nadd validator-functions to uss_make_matches():\n\nmatches.R\ncols_engsoc() may be useful"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#managing-global-state",
    "href": "materials/day-2-session-2-side-effects.html#managing-global-state",
    "title": "📦 Building tidy tools",
    "section": "Managing global state",
    "text": "Managing global state\nLeave no footprints.\nLeave the global state how you found it, avoid surprises later:\n\npackages loaded\nalso: options, environment variables\n\n\nLoading {devtools} in .Rprofile changes the global state.\n\n\nWhen we hit the “Knit” button, or the Quarto “Render” button:\n\nit runs in a new R session\ndoes not execute user’s .Rprofile"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#using-self-removing-footprints",
    "href": "materials/day-2-session-2-side-effects.html#using-self-removing-footprints",
    "title": "📦 Building tidy tools",
    "section": "Using “self-removing footprints”",
    "text": "Using “self-removing footprints”\nThe {withr} package gives us tools to:\n\nmodify global state\nspecify when to reverse the modification\n\n\nUseful family of functions:\n\nwithr::local_*()\nchanges the state back when a scope is exited\nif called within a function, normally when the function exits"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#when-could-this-be-useful",
    "href": "materials/day-2-session-2-side-effects.html#when-could-this-be-useful",
    "title": "📦 Building tidy tools",
    "section": "When could this be useful?",
    "text": "When could this be useful?\nCRAN is (rightly) particular about “leave no footprints”.\nYou may need:\n\nwithr::local_options(): change an option\nwithr::local_dir(): change the working directory\nwithr::local_tempfile(): path to a temporary file\n\n\nUseful in testthat code and in R code."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#example",
    "href": "materials/day-2-session-2-side-effects.html#example",
    "title": "📦 Building tidy tools",
    "section": "Example",
    "text": "Example\n\nusethis::use_test(\"validate\")\nchange:\nexpect_identical(error_condition$cols_req, \"foo\")\nto:\nexpect_identical(error_condition$cols_re, \"foo\")\nrerun tests 🤔\n\n\n\nBy default, $ accepts partial matching.\nWe want stricter testing, so we need to set some options."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#our-turn-2.2.2",
    "href": "materials/day-2-session-2-side-effects.html#our-turn-2.2.2",
    "title": "📦 Building tidy tools",
    "section": "Our turn \"2.2.2\"",
    "text": "Our turn \"2.2.2\"\nTurn off $ partial matching when testing.\n\n\nOnly if needed, btt22::btt_reset_hard(\"2.2.2\")\n\n\n\nGet new files, btt22::btt_get(\"2.2.2\"):\n\nutils-testing.R\n\nusethis::use_package(\"withr\")"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#local_warn_partial_match",
    "href": "materials/day-2-session-2-side-effects.html#local_warn_partial_match",
    "title": "📦 Building tidy tools",
    "section": "local_warn_partial_match()",
    "text": "local_warn_partial_match()\nIn essence, this sets (temporarily) TRUE:\n\noptions(\"warnPartialMatchDollar\")\noptions(\"warnPartialMatchArgs\")\noptions(\"warnPartialMatchAttr\")\n\n\nWith a couple of wrinkles:\n\nwe need to treat NULL as FALSE.\nwe set things back when the calling scope exits."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#our-turn-2.2.2-continued",
    "href": "materials/day-2-session-2-side-effects.html#our-turn-2.2.2-continued",
    "title": "📦 Building tidy tools",
    "section": "Our turn \"2.2.2\", continued",
    "text": "Our turn \"2.2.2\", continued\n\nusethis::use_test(\"validate\")\nadd local_warn_partial_match() to top of blocks.\ngetOption(\"warnPartialMatchDollar\")\nchange:\nexpect_identical(error_condition$cols_re, \"foo\")\ndevtools::test() 🎉\ngetOption(\"warnPartialMatchDollar\")\nchange back to $cols_req"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#your-turn-2.2.3",
    "href": "materials/day-2-session-2-side-effects.html#your-turn-2.2.3",
    "title": "📦 Building tidy tools",
    "section": "Your turn \"2.2.3\"",
    "text": "Your turn \"2.2.3\"\nImplement testing with side effects\n\n\nOnly if needed, btt22::btt_reset_hard(\"2.2.3\")\n\n\n\nNo new files.\n\n\n\nadd local_warn_partial_match() to all test-blocks.\ntest-marches.R:\n\nadd expect_error() calls for data-frame and columns (use class argument).\nat end, add:\n\nexpect_snapshot(dplyr::glimpse(italy))"
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#summary",
    "href": "materials/day-2-session-2-side-effects.html#summary",
    "title": "📦 Building tidy tools",
    "section": "Summary",
    "text": "Summary\n\nThe most-common side-effect is an error. Good design:\n\n\n\nsimple (as possible) predicate\nclear mesage\nadd a class using naming convention, and additional information\n\n\n\nUse snapshot tests to capture side-effects.\n\nbe very careful when accepting changes to snapshots.\n\n\n\nUse withr::local_*() functions to “leave no footprints”."
  },
  {
    "objectID": "materials/day-2-session-2-side-effects.html#references",
    "href": "materials/day-2-session-2-side-effects.html#references",
    "title": "📦 Building tidy tools",
    "section": "References",
    "text": "References\n\n\nhttps://bit.ly/.."
  },
  {
    "objectID": "materials/day-1-session-3-testing.html#section-1",
    "href": "materials/day-1-session-3-testing.html#section-1",
    "title": "📦 Building tidy tools",
    "section": "…",
    "text": "…"
  },
  {
    "objectID": "materials/day-1-session-3-testing.html#learning-objectives",
    "href": "materials/day-1-session-3-testing.html#learning-objectives",
    "title": "📦 Building tidy tools",
    "section": "Learning Objectives",
    "text": "Learning Objectives\nAt the end of this section you will be able to:"
  },
  {
    "objectID": "materials/day-1-session-3-testing.html#summary",
    "href": "materials/day-1-session-3-testing.html#summary",
    "title": "📦 Building tidy tools",
    "section": "Summary",
    "text": "Summary\n\n….\n\n….\n\n.\n\n…ed"
  },
  {
    "objectID": "materials/day-1-session-3-testing.html#summary-continued",
    "href": "materials/day-1-session-3-testing.html#summary-continued",
    "title": "📦 Building tidy tools",
    "section": "Summary continued",
    "text": "Summary continued\n\n…\n\n."
  },
  {
    "objectID": "materials/day-1-session-3-testing.html#references",
    "href": "materials/day-1-session-3-testing.html#references",
    "title": "📦 Building tidy tools",
    "section": "References",
    "text": "References\n\n\nhttps://bit.ly/.."
  },
  {
    "objectID": "pre-reqs.html",
    "href": "pre-reqs.html",
    "title": "Prerequisites",
    "section": "",
    "text": "You will need"
  },
  {
    "objectID": "pre-reqs.html#install-r-and-rstudio",
    "href": "pre-reqs.html#install-r-and-rstudio",
    "title": "Prerequisites",
    "section": "Install R and RStudio",
    "text": "Install R and RStudio\nYou will need:\n\nR 4.x. Version 3.6.x will likely be fine but we recommend that you install the latest versions if possible.\nRStudio 2022.02.1 or above\n\n\nInstalling R\nDownload the pre-compiled binary for your OS from https://cloud.r-project.org/ and install.\n\nFor Windows\nClick “Download R for Windows”, then “base”, then “Download R #.#.# for Windows”. This will download an .exe file; once downloaded, open to start the installation. If you do not have administrator rights, the installer will default to install in your Documents folder - if you prefer, you can change the location to another folder that you have write access to.\n\n\nFor Mac\nClick “Download R for (Mac) OS X”, then “R-#.#.#.pkg” to download the installer. Run the installer to complete installation.\n\n\nFor Linux\nClick “Download R for Linux”. Instructions on installing are given for Debian, Redhat, Suse and Ubuntu distributions. Where there is a choice, install both r-base and r-base-dev.\n\n\n\nInstalling R Studio\nDownloads are available from https://www.rstudio.com/products/rstudio/download/ (scroll to the end of the page to see the downloads). You want RStudio Desktop (Open Source License).\n\nFor Windows with no admin rights\nDownload the .zip source archive under “Zip/Tarballs”. Extract the files to a folder where you have write access, e.g. C:\\Users\\username\\RStudio. In this folder, open the bin directory and find the RStudio program: it is named rstudio.exe, but the file extension will typically be hidden, so look for rstudio. Right-click this executable to create a desktop shortcut. Double-click the executable or use the shortcut to open.\n\n\nFor all other operating systems\nDownload the relevant installer for your OS listed under “Installers for Supported Platforms”. Run the installer to complete installation."
  },
  {
    "objectID": "pre-reqs.html#install-r-package-development-toolchain",
    "href": "pre-reqs.html#install-r-package-development-toolchain",
    "title": "Prerequisites",
    "section": "Install R package development toolchain",
    "text": "Install R package development toolchain\n\nFor Windows with no admin rights\nDownload the latest (recommended) Rtools installer, Rtools.exe, from https://cran.r-project.org/bin/windows/Rtools/. Run the installer keeping the default settings.\n\n\nFor Windows with admin rights\nDownload the latest (recommended) Rtools installer, Rtools.exe, from https://cran.r-project.org/bin/windows/Rtools/. Run the installer making the following selections: keep the default settings for the installation location and components to install; check the box to add rtools to the system PATH.\n\n\nFor Mac\nInstall XCode. Either:\n\nDownload and install XCode from the Mac AppStore: http://itunes.apple.com/us/app/xcode/id497799835?mt=12\nWithin XCode go to Preferences : Downloads and install the Command Line Tools\n\nOr for a smaller download size:\n\nRegister as an Apple Developer (free) here: https://developer.apple.com/programs/register/\nDownload the Command Line Tools for XCode appropriate for the version of OS X you are running from here: https://developer.apple.com/downloads/\n\n\n\nFor Linux\nIf you installed r-base-dev, when installing R, you should have all you need to build packages from source. Otherwise return to the instructions for installing R for your distribution and follow the instructions there to install the additional tools."
  },
  {
    "objectID": "pre-reqs.html#packages",
    "href": "pre-reqs.html#packages",
    "title": "Prerequisites",
    "section": "Install the devtools and btt22 packages",
    "text": "Install the devtools and btt22 packages\nThe aim of devtools (Wickham et al. 2021) is to make package development easier by providing R functions that simplify and expedite common tasks. The R Packages (Wickham and Bryan 2020) book and the Building Tidy Tools workshop are based on a devtools workflow.\nInstall devtools:\n\ninstall.packages(\"devtools\")\n\nAfter installing the R package development toolchain and devtools, you can verify your system is set up by running:\n\ndevtools::has_devel()\n\nYour system is ready to build packages!\n\n\nThe central project for the Building Tidy Tools 2022 workshop is you will build a package called ussie, and populate it with functions. The goal of btt22 is to help you build the ussie package. Its two main purposes are:\n\ninstalling btt22 means you will have all the packages you need for the workshop and,\nbtt22 has functions that allow you to template code for workshop exercises and to reset the state of ussie to a particular point in the workshop if things go wrong.\n\nWe recommend you install btt22 no sooner than a week before the workshop.\nInstall btt22 from GitHub:\n\ndevtools::install_github(\"rstudio-conf-2022/btt22\")"
  },
  {
    "objectID": "pre-reqs.html#git",
    "href": "pre-reqs.html#git",
    "title": "Prerequisites",
    "section": "Git",
    "text": "Git\n\nWindows\nCheck if Git is installed by running which git in the Terminal\nIf which git didn’t find Git installed:\n\nDownload and install from https://git-scm.com/downloads\nKeep all the default settings\n\nIf the installer hangs with the progress bar at 100%, close the installer with Task Manager (press Ctrl + Alt + Delete; select Task Manager; find Git for Windows installer and close).\n\nOpen RStudio. In the menus go to Tools > Global Options > Git/SVN.\nCheck RStudio has found git under “Git executable:”\n\nYou may need to click Browse and find the git executable.\nIt may be under C:\\Users\\username\\AppData\\Local\\Programs\\Git\\ - remember if file extensions are hidden it will show as git rather than git.exe. Restart RStudio before trying to use git.\n\n\n\n\nMac\nCheck if Git is installed by running which git in the Terminal\nIf asked to install the Xcode command line tools, say yes!\nIf which git didn’t find Git installed, and if you weren’t prompted to install it, run the following in the Terminal: xcode-select --install\n\nOther options for installing Git on a Mac\n\nRecommended if you don’t want to use the Terminal:\n\nDownload and install from https://git-scm.com/downloads\nIf you’re developing version controlled packages, you should get to using the Terminal\n\nRecommended if you do lots of scientific computing and using software that needs to be installed and updated regularly:\n\nYou might first need to install Homebrew if this is your first time using it, see brew.sh for instructions\nUse Homebrew: Run the following in the Terminal: brew install git"
  },
  {
    "objectID": "pre-reqs.html#github-account",
    "href": "pre-reqs.html#github-account",
    "title": "Prerequisites",
    "section": "GitHub account",
    "text": "GitHub account\nRegister a GitHub account at github.com.\n\nIncorporate your actual name!\nReuse your username from other contexts.\nPick a username you will be comfortable revealing to your future boss.\nShorter is better than longer.\nBe as unique as possible in as few characters as possible.\nMake it timeless.\nAvoid words laden with special meaning in programming.\nUse all lower case letters.\n\nAdvice and more information from Happy Git with R (Bryan and Hester, n.d.)"
  },
  {
    "objectID": "pre-reqs.html#check-link-between-rstudio-and-github",
    "href": "pre-reqs.html#check-link-between-rstudio-and-github",
    "title": "Prerequisites",
    "section": "Check link between RStudio and GitHub",
    "text": "Check link between RStudio and GitHub\nConfigure your user.name and user.email for git in RStudio with:\n\nusethis::use_git_config(\n  user.name = \"Jane Doe\",          # actual first and last name\n  user.email = \"jane@example.com\"  # email associated with GitHub account\n  )\n\nCommunicating with GitHub will require authentication. Instead of typing in your username and password each time, use a PAT (personal access token)\nCreate a PAT with:\n\nusethis::create_github_token()\n\n\nGive the token a descriptive name\nCopy and also store this token somewhere (you won’t be able to see it again!)\n\nNow put your PAT into the Git credential store with:\n\ngitcreds::gitcreds_set()\n\n\nYou may need to install gitcreds (Csárdi 2020).\n\nYou can check your set up by asking for a “situation report”\n\nusethis::git_sitrep()\n\n\nPersonal Access Token\nThe Managing Git(Hub) Credentials vignette in the usethis (Wickham, Bryan, and Barrett 2022)package has all the details on PATs!"
  },
  {
    "objectID": "schedule.html",
    "href": "schedule.html",
    "title": "schedule",
    "section": "",
    "text": "Day 1\n\n\n\nTime\nActivity\n\n\n\n\n09:00 - 10:30\nSession 1: Introduction and the whole game\n\n\n10:30 - 11:00\nCoffee break\n\n\n11:00 - 12:30\nSession 2: Documentation - Minimal\n\n\n12:30 - 13:30\nLunch break\n\n\n13:30 - 15:00\nSession 3: Unit testing\n\n\n15:00 - 15:30\nCoffee break\n\n\n15:30 - 17:00\nSession 4: Documentation - Sharing\n\n\n\n\n\nDay 2\n\n\n\nTime\nActivity\n\n\n\n\n09:00 - 10:30\nSession 1: Function design\n\n\n10:30 - 11:00\nCoffee break\n\n\n11:00 - 12:30\nSession 2: Side effects\n\n\n12:30 - 13:30\nLunch break\n\n\n13:30 - 15:00\nSession 3: Tidy eval\n\n\n15:00 - 15:30\nCoffee break\n\n\n15:30 - 17:00\nSession 4: Miscellany"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Building tidy tools",
    "section": "",
    "text": "🗓 July 25 and 26, 2022\n⏰ 9:00 - 17:00\n🏨 [ADD ROOM]\n✍️ rstd.io/conf"
  },
  {
    "objectID": "index.html#overview",
    "href": "index.html#overview",
    "title": "Building tidy tools",
    "section": "Overview",
    "text": "Overview\nThis is a two-day, hands-on workshop for those who have embraced the tidyverse and want to build their own packages. We’ll discuss how functions present to the user, functional programming tools, and Object-oriented programming with S3 (R’s simplest system of OOP). We will also cover the tidy eval system which allows you to use tidyverse grammar in your functions.\n\nLearn efficient workflows for developing high-quality R functions, using the set of conventions codified by a package. You’ll also learn workflows for unit testing, which helps ensure that your functions do exactly what you think they do.\nMaster the art of writing functions that do one thing well and can be fluently combined together to solve more complex problems. We’ll cover common function writing pitfalls and how to avoid them.\nLearn how to write collections of functions that work well together, and adhere to existing conventions so they’re easy to pick up for newcomers.\n\nYou should take this workshop if you have experience programming in R and want to learn how to tackle larger scale problems. You’ll get the most from it if you’re already familiar with functions and are comfortable with R’s basic data structures (vectors, matrices, arrays, lists, and data frames)."
  },
  {
    "objectID": "index.html#learning-objectives",
    "href": "index.html#learning-objectives",
    "title": "Building tidy tools",
    "section": "Learning objectives",
    "text": "Learning objectives\n[ADD AN ITEMIZED LIST OF LEARNING OBJECTIVES.]"
  },
  {
    "objectID": "index.html#is-this-course-for-me",
    "href": "index.html#is-this-course-for-me",
    "title": "Building tidy tools",
    "section": "Is this course for me?",
    "text": "Is this course for me?\nHave you written a few of your own R functions? Are you ready to start sharing your code (or data) through R packages? Are you curious what you can do to make your first R packages easy for your users to use, and for you to maintain?"
  },
  {
    "objectID": "index.html#prework",
    "href": "index.html#prework",
    "title": "Building tidy tools",
    "section": "Prework",
    "text": "Prework\nTo get the most out of this workshop you will need a laptop with the following installed:\n\nR and RStudio\nR package development toolchain: Rtools(windows) or XCode (mac) or r-base-dev\nThe following packages: devtools and TO ADD WHEN FINALISED\nGit\nGitHub account\nGitHub to be linked to RStudio\n\nDetailed instructions for installing these are covered in Prerequisites"
  },
  {
    "objectID": "index.html#instructors",
    "href": "index.html#instructors",
    "title": "Building tidy tools",
    "section": "Instructors",
    "text": "Instructors\nEmma Rand is a Senior Lecturer (Associate Prof) in the Department of Biology at the University of York where she specialises in teaching data science and reproducibility, particularly to those who do not see themselves as programmers. She leads a UKRI funded project called Cloud-SPAN which trains researchers in cloud-based high performance computing for ’omics. She is a Software Sustainability Institute Fellow, a Teaching team lead for R Forwards and delivers data science training for the Royal Society of Biology and the Biochemical Society.\nIan Lyttle is a Data Scientist at Schneider Electric. His technical interests include visualization, interactivity, and functional programming. He is a community contributor to tidyverse and r-lib, and maintains CRAN packages including vegawidget and boxr. He has delivered tutorials on a variety of R topics at UseR!, Uncoast Unconf, and the Iowa State University Graphics Group."
  }
]